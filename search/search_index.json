{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"Persona Essentials \u26f8 Lookin' cool Joker \ud83d\udef9 <p>Enables more advanced mod support for P3P PC, P4G (64 bit), and P5R PC.</p>"},{"location":"#about","title":"About","text":"<p>Persona Essentials is a set of miscellaneous improvements for Persona 3 Portable (PC), Persona 4 Golden (PC, 64 bit) and Persona 5 Royal (PC) based on Reloaded II.  </p>"},{"location":"#features-for-users","title":"Features (for Users)","text":"<ul> <li>Intro Skip.  </li> <li>Toggle Pause on Window Focus Loss.  </li> </ul>"},{"location":"#features-for-modders","title":"Features (for Modders)","text":"<ul> <li>Support for replacing CPK file contents via other mods.  </li> <li>Support for injecting custom music into the game without extracting files.  </li> <li>Support for hot reload (update files on the fly without game reboot).  </li> <li>Automatically merges .tbl files.  </li> <li>Automatically merges PAK (.bin) files.  </li> <li>Automatically merges .bf files.  </li> <li>Automatically merges .spd files.  </li> <li>Automatically merges .bmd files.</li> </ul>"},{"location":"#building","title":"Building","text":"<ul> <li>Install Reloaded II.  </li> <li>Install .NET 7 SDK.  </li> <li>[Optional] Download Visual Studio/Rider and open the .sln file.  </li> </ul> <p>When you build your project, the files will automatically be copied to the right directory and be loaded by Reloaded.  </p> <p>Refer to the Reloaded wiki if you need more information.</p>"},{"location":"#how-to-make-mods-with-essentials","title":"How to make mods with Essentials","text":"<p>Refer to the usage section.</p>"},{"location":"#special-thanks","title":"Special Thanks","text":"<ul> <li>Lipsum (zarroboogs): Original Implementation  </li> <li>CherryCreamSoda: Project Logo  </li> <li>Shujynx, Covfefe: Mod Test Data  </li> <li>AnimatedSwine37: PAK and BF Merging  </li> <li>Secre-C: SPD Merging  </li> <li>oceanstuck: BMD Merging</li> </ul>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#prerequisites","title":"Prerequisites","text":""},{"location":"usage/#create-a-reloaded-mod","title":"Create a Reloaded Mod","text":"<p>Follow the guidance in the Reloaded wiki to create a new Reloaded mod.  </p>"},{"location":"usage/#download-mod","title":"Download Mod","text":"<p>Note</p> <p>This image needs updated.</p> <p>If you don't have it already, download the <code>Persona 5 Royal Essentials</code> Mod.  </p> <p></p>"},{"location":"usage/#set-dependency-on-p5r-essentials","title":"Set Dependency on P5R Essentials","text":"<p>In the <code>Edit Mod</code> menu (right click your mod in mods list) we're going to add <code>Persona 5 Royal Essentials</code> as a dependency.  </p> <p></p> <p>Adding a 'dependency' to your mod will make it such that P5R Essentials will always be loaded when your mod is loaded. This is a necessary step. </p>"},{"location":"usage/#replacing-files-in-cpks","title":"Replacing files in CPKs","text":"<p>Info</p> <p>Files inside CPKs can be replaced by creating a folder called <code>P5REssentials/CPK</code> in your mod, and adding folders corresponding to the names of the CPKs inside those folders.</p>"},{"location":"usage/#opening-the-mod-folder","title":"Opening the Mod Folder","text":"<p>Go to the folder where your mod is stored, this can be done by simply clicking the <code>Open Folder</code> button.  </p>"},{"location":"usage/#add-some-files","title":"Add Some Files","text":"<p>Make a folder called <code>P5REssentials</code>, and inside that a folder called <code>CPK</code>.  Inside that folder, make a folder [or multiple!] where you will store your mod files (you can call it anything you want!).  </p> <p></p> <p>I used <code>EN.CPK</code> for clarity to match the game's structure.  </p> <p></p> <p>We will replace these two files to enable different button prompts \ud83d\ude07.</p> <p>The contents of our mod folder would now look as follows.</p> <pre><code>// Mod Contents\nModConfig.json\nPreview.png\nP5REssentials\n\u2514\u2500CPK\n  \u2514\u2500EN.CPK\n    \u2514\u2500BUTTON\n      \u251c\u2500BUTTON_XBOX.PAK\n      \u2514\u2500BUTTONXBOXTEXINFO.DAT\n</code></pre> <p>The connectors <code>\u2514\u2500</code> represent folders.</p>"},{"location":"usage/#replacing-music","title":"Replacing Music","text":"<p>Info</p> <p>Essentials can be used to replace audio inside AWB &amp; ACB pairs.  </p> <p>Uses FileRedirectionFramework under the hood, follow instructions here for more information. Don't add dependency on AWB emulator (it's not necessary), but do follow rest of guide.</p>"},{"location":"usage/#example","title":"Example","text":"<p>As per usage guide above. This works the same as it does in Persona 4 Golden 64-bit/2023 version.</p> <p></p> <p>Replaces 53rd audio track (<code>Signs of Love</code>).  </p> <p>Warning</p> <p>Encryption keys/scheme on the ADX/hca audio must match original file. [Can someone please link Amicitia or other relevant wiki here??]  </p>"},{"location":"usage/#replacing-files-in-archives","title":"Replacing Files In Archives","text":"<p>Info</p> <p>Essentials can be used to replace individual files in archives such as PAK, BIN, PAC, and ARC  </p> <p>Uses FileRedirectionFramework under the hood, follow instructions here for more information. Don't add dependency on PAK emulator (it's not necessary), but do follow rest of guide.</p>"},{"location":"usage/#example_1","title":"Example","text":"<p>As per usage guide above.  </p> <p></p> <p>Replaces <code>battle/MSG.TBL</code> in <code>init_free.bin</code>.  </p>"},{"location":"usage/#editing-bf-files","title":"Editing BF Files","text":"<p>Info</p> <p>Essentials can be used to edit the procedures and messages in BF files such that multiple mods can edit the same file.</p> <p>Uses FileRedirectionFramework under the hood, follow instructions here for more information. Don't add dependency on BF emulator (it's not necessary), but do follow rest of guide.</p> <p>In addition to the <code>.flow</code> and/or <code>.msg</code> files you include in <code>FEmulator\\BF</code> per the above guide you will also need to add dummy bf files where they would normally go in <code>FEmulator\\PAK</code> or <code>P5REssentials\\CPK</code>.</p>"},{"location":"usage/#example-loose-bf","title":"Example - Loose BF","text":"<p>Info</p> <p>To create a dummy bf file you can create a new empty text file and just rename it, changing the file extension.</p> <p>To edit the loose <code>e860_034a.bf</code> file in <code>event_data\\script</code> you would first add a dummy bf file in <code>P5REssentials\\CPK\\data_e.cpk\\event_data\\script</code></p> <p></p> <p>Then you would put your <code>.flow</code> or <code>.msg</code> file with the same name in <code>FEmulator\\BF</code></p> <p></p>"},{"location":"usage/#example-bf-in-archive","title":"Example - BF In Archive","text":"<p>To edit <code>f007.bf</code> in the archive <code>field\\pack\\fd007_003.arc</code> you would first add a dummy bf file in <code>FEmulator\\PAK\\field\\pack\\fd007_003.arc</code> (as per the information above)</p> <p></p> <p>Then you would put your <code>.flow</code> or <code>.msg</code> file with the same name in <code>FEmulator\\BF</code></p> <p></p>"},{"location":"usage/#editing-bmd-files","title":"Editing BMD Files","text":"<p>Info</p> <p>Essentials can be used to edit messages in BMD files such that multiple mods can edit the same file.</p> <p>Uses FileRedirectionFramework under the hood, follow instructions here for more information. Don't add dependency on BMD emulator (it's not necessary), but do follow rest of guide.</p> <p>In addition to the <code>.msg</code> files you include in <code>FEmulator\\BMD</code> per the above guide you will also need to add dummy bmd files where they would normally go in <code>FEmulator\\PAK</code> or <code>P5REssentials\\CPK</code>.</p>"},{"location":"usage/#example-loose-bmd","title":"Example - Loose BMD","text":"<p>Info</p> <p>To create a dummy bmd file you can create a new empty text file and just rename it, changing the file extension.</p> <p>To edit the loose <code>e722_103.bmd</code> file in <code>event_data\\message</code> you would first add a dummy bmd file in <code>P5REssentials\\CPK\\en.cpk\\event_data\\message</code></p> <p></p> <p>Then you would put your <code>.msg</code> file with the same name in <code>FEmulator\\BMD</code></p> <p></p>"},{"location":"usage/#example-bmd-in-archives","title":"Example - BMD In Archives","text":"<p>To edit <code>datSkillHelp.bmd</code> in the archive <code>init\\datmsg.pak</code> you would first add a dummy bmd file in <code>FEmulator\\PAK\\init\\datmsg.pak</code> (as per the information above)</p> <p></p> <p>Then you would put your <code>.msg</code> file with the same name in <code>FEmulator\\BMD</code></p> <p></p>"},{"location":"usage/#editing-tbl-files","title":"Editing TBL Files","text":"<p>Any TBL files in P3P, P4G and P5R (such as <code>SKILL.TBL</code> and <code>UNIT.TBL</code>) will automatically be merged if multiple mods edit them. This includes <code>itemtbl.bin</code> in P4G and P3P.</p>"},{"location":"usage/#embedded-bf-in-aicalctbl","title":"Embedded BF in AICALC.TBL","text":"<p>In P3P and P4G <code>AICALC.TBL</code> contains two embedded bf files, <code>friend.bf</code> and <code>enemy.bf</code>.  To edit these place a dummy bf with the same name in <code>FEmulator\\PAK\\init_free.bin\\battle</code> and then hook anything you want to the same way you would any other bf file.</p>"},{"location":"usage/#embedded-bmd-in-msgtbl","title":"Embedded BMD in MSG.TBL","text":"<p>In P3P and P4G <code>MSG.TBL</code> contains an embedded bmd file, <code>msgtbl.bmd</code>. To edit it, place a dummy bmd with the same name in <code>FEmulator\\PAK\\init_free.bin\\battle</code> and then hook anything you want the same way you would any other bmd file.</p>"},{"location":"usage/#editing-spd-files","title":"Editing SPD Files","text":"<p>Info</p> <p>Essentials can be used to edit textures and sprites in SPD files such that multiple mods can edit sprites in the same texture.</p> <p>Uses FileRedirectionFramework under the hood, follow instructions here for more information. Don't add dependency on SPD emulator (it's not necessary), but do follow rest of guide.</p> <p>In addition to the sprite entry files <code>(.spdspr/.sprt)</code> and/or textures <code>(.dds/.tmx)</code> files you include in <code>FEmulator\\SPD</code> per the above guide you may need to add dummy spd files where they would normally go in <code>FEmulator\\PAK</code> (only if the spd you're editing is located in an archive).</p>"},{"location":"usage/#example-loose-spd","title":"Example - Loose SPD","text":"<p>To edit the loose <code>CHAT.SPD</code> file in <code>FONT\\CHAT</code> you would first create a directory mimicking the path of the spd in <code>FEmulator\\SPD</code>, including the spds filename.</p> <p></p> <p>Then you would put your sprite entry and/or texture files in <code>FEmulator\\SPD\\FONT\\CHAT\\CHAT.SPD\\</code></p> <p></p>"},{"location":"usage/#example-spd-in-archive","title":"Example - SPD in archive","text":"<p>Info</p> <p>To create a dummy spd file you can create a new empty text file and just rename it, changing the file extension.</p> <p>To edit <code>higawari_common.spd</code> in the archive <code>CALENDAR\\HIGAWARI.PAK</code> you would first add a dummy spd file in <code>FEmulator\\PAK\\CALENDAR\\HIGAWARI.PAK</code> (as per the information above)</p> <p></p> <p>Then follow the steps for loose spds.</p> <p></p>"},{"location":"usage/#supporting-multiple-languages","title":"Supporting Multiple Languages","text":"<p>Persona Essentials has integration with Localisation Framework to help you make your mods support multiple languages. By adding files as described in its documentation you can have different versions of any type of file for each language. The framework will automatically determine what language the user is playing in and use the correct ones.</p>"},{"location":"usage/#example-bmd","title":"Example - BMD","text":"<p>Say you have edited the BMD file <code>E722_103.bmd</code> in <code>EVENT_DATA\\MESSAGE</code> as described in Example - Loose BMD and want it to work in Japanese.  As per that section, you will have a <code>msg</code> file at <code>FEmulator\\BMD\\E722_013.msg</code> with your English messages.</p> <p></p> <p>To support Japanese you would place a corresponding <code>msg</code> file with Japanese text in <code>FEmulator\\L10N\\ja\\E722_013.msg</code>.</p> <p></p> <p>To support more languages you would add more copies of that file in the folder <code>FEmulator\\L10N\\{langCode}</code> where <code>{langCode}</code> is the id of the language listed in the Localisation Framework documentation.</p>"},{"location":"usage/#releasinguploading-your-mods","title":"Releasing/Uploading your Mods","text":"<p>Please refer to the Reloaded wiki, and follow the guidance.  </p> <p>You should both Enable Update Support AND Publish according to the guidelines.  </p> <p>It is recommended to enable update support even if you don't plan to ship updates as doing so will allow your mod to be used in Mod Packs.</p>"}]}